<section id="users" class="users">
    <h2>Liste des utilisateurs</h2>
    
    <table id="users-table">
        <thead>
            <tr>
                <th>Nom</th>
                <th>Email</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <script>
    async function loadUsers() {
        try {
            const response = await fetch('/api/users');
            const users = await response.json();
            const tbody = document.querySelector("#users-table tbody");
            tbody.innerHTML = "";
            if(users.length === 0){
                tbody.innerHTML = "<tr><td colspan='2'>Aucun utilisateur trouv√©</td></tr>";
                return;
            }
            users.forEach(user => {
                const tr = document.createElement("tr");
                tr.innerHTML = `<td>${user.name}</td><td>${user.email}</td>`;
                tbody.appendChild(tr);
            });
        } catch (err) {
            console.error("Erreur lors du chargement des utilisateurs:", err);
        }
    }

    window.addEventListener("DOMContentLoaded", loadUsers);
    </script>
</section>
